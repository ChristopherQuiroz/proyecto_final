{% extends "layout_cliente.html" %}

{% block cliente_extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/cliente/mis_pedidos.css') }}">
{% endblock %}

{% block cliente_content %}

<h2 class="pedidos-title">Mis Pedidos</h2>

<section class="pedidos">
    
    {% if pedidos %}
        {% for p in pedidos %}
        <article class="pedido-card">

            <header class="pedido-header">
                <h3 class="pedido-id">Pedido #{{ p.id }}</h3>
                <span class="pedido-estado estado-{{ p.estado | lower }}">{{ p.estado }}</span>
            </header>

            <div class="pedido-info">
                <p><strong>Fecha:</strong> {{ p.fecha }}</p>
                <p><strong>Total:</strong> {{ p.total }} Bs</p>
            </div>

            <details class="pedido-detalle">
                <summary>Ver productos</summary>
                <ul>
                    {% for item in p.productos %}
                    <li>{{ item.cantidad }} × {{ item.nombre }} — {{ item.subtotal }} Bs</li>
                    {% endfor %}
                </ul>
            </details>

        </article>
        {% endfor %}

    {% else %}
        <p class="pedidos-empty">No tienes pedidos aún.</p>
    {% endif %}

</section>

{% endblock %}

<!-- ICONOS PROFESIONALES -->
<script src="https://unpkg.com/phosphor-icons"></script>

<!-- NAV SUPERIOR -->
<nav class="topbar">
    <button class="menu-btn" onclick="toggleSidebar()">‚ò∞</button>

    <div class="brand">
        <span class="brand-icon">üç∞</span>
        <span class="brand-text">DulceMomento ‚Äî {{ rol|upper }}</span>
    </div>
</nav>

<!-- SIDEBAR -->
<aside class="sidebar" id="sidebar">

    <button class="close-btn" onclick="toggleSidebar()">√ó</button>

    <!-- PERFIL EN SIDEBAR -->
    <div class="sidebar-header">

        <!-- AVATAR CON INICIAL DEL USUARIO REAL -->
        <div class="avatar" onclick="openPerfil()">
            {{ session.get('username','?')[0] | upper }}
        </div>

        <!-- NOMBRE DEL USUARIO (NO EL ROL) -->
        <p class="role-label" onclick="openPerfil()">
            {{ session.get('username', 'Usuario') }}
        </p>
    </div>

    <!-- MEN√ö -->
    <ul class="sidebar-menu">

        {% if rol == "empleado" %}
            <li><a href="/empleado"><i class="ph-house"></i> Inicio</a></li>
            <li><a href="/empleado/clientes"><i class="ph-users"></i> Clientes</a></li>
            <li><a href="/empleado/crear_pedido"><i class="ph-shopping-cart"></i> Crear Pedido</a></li>
            <li><a href="/empleado/pedidos"><i class="ph-clipboard-text"></i> Ver Pedidos</a></li>
            <li><a href="/empleado/productos"><i class="ph-cookie"></i> Productos</a></li>
            <li><a href="/empleado/inventario"><i class="ph-warehouse"></i> Inventario</a></li>

        {% elif rol == "admin" %}
            <li><a href="/admin"><i class="ph-house"></i> Inicio</a></li>
            <li><a href="/admin/clientes"><i class="ph-users"></i> Clientes</a></li>
            <li><a href="/admin/empleados"><i class="ph-identification-badge"></i> Empleados</a></li>
            <li><a href="/admin/categorias"><i class="ph-folders"></i> Categor√≠as</a></li>
            <li><a href="/admin/productos"><i class="ph-cookie"></i> Productos</a></li>
            <li><a href="/admin/pedidos"><i class="ph-clipboard-text"></i> Pedidos</a></li>
            <li><a href="/admin/inventario"><i class="ph-warehouse"></i> Inventario</a></li>
            <li><a href="/admin/reportes"><i class="ph-chart-line"></i> Reportes</a></li>

        {% elif rol == "cliente" %}
            <li><a href="/cliente"><i class="ph-house"></i> Inicio</a></li>
            <li><a href="/cliente/categorias"><i class="ph-grid-four"></i> Categor√≠as</a></li>
            <li><a href="/cliente/productos"><i class="ph-cookie"></i> Productos</a></li>
            <li><a href="/cliente/carrito"><i class="ph-shopping-bag"></i> Carrito</a></li>
            <li><a href="/cliente/mis_pedidos"><i class="ph-clipboard-text"></i> Mis pedidos</a></li>
            <li><a href="/logout"><i class="ph-sign-out"></i> Cerrar sesi√≥n</a></li>

        {% elif rol == "invitado" %}
            <li><a href="/"><i class="ph-house"></i> Inicio</a></li>
            <li><a href="/cliente/categorias"><i class="ph-grid-four"></i> Categor√≠as</a></li>
            <li><a href="/cliente/productos"><i class="ph-cookie"></i> Productos</a></li>
            <li><a href="/login"><i class="ph-sign-in"></i> Iniciar Sesi√≥n</a></li>
            <li><a href="/register"><i class="ph-user-plus"></i> Registrarse</a></li>
        {% endif %}

    </ul>

    {% if rol != "invitado" %}
    <a href="/logout" class="logout-btn">
        <i class="ph-sign-out"></i> Cerrar Sesi√≥n
    </a>
    {% endif %}
</aside>

<!-- MODAL PERFIL -->
<div id="perfilModal" class="perfil-modal">
    <div class="perfil-content">
        <span class="perfil-close" onclick="closePerfil()">&times;</span>

        <!-- FOTO / INICIAL REAL -->
        <div class="perfil-avatar">
            {% if session.get('foto') %}
                <img src="{{ session['foto'] }}" alt="Foto de perfil">
            {% else %}
                <div class="perfil-inicial">
                    {{ session.get('username','?')[0] | upper }}
                </div>
            {% endif %}
        </div>

        <h2>Mi Perfil</h2>

        <div class="perfil-info">
            <p><strong>Usuario:</strong> {{ session.get('username', 'Invitado') }}</p>
            <p><strong>Rol:</strong> {{ rol|upper }}</p>
            <p><strong>Email:</strong> {{ session.get('email', 'No disponible') }}</p>
            <p><strong>ID:</strong> {{ session.get('user_id', '---') }}</p>
        </div>
    </div>
</div>

<!-- SCRIPTS -->
<script>
function toggleSidebar() {
    document.getElementById("sidebar").classList.toggle("show");
}

function openPerfil() {
    document.getElementById("perfilModal").style.display = "block";
}

function closePerfil() {
    document.getElementById("perfilModal").style.display = "none";
}
</script>

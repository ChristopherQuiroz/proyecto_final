{% extends "layout_admin.html" %}

{% block admin_content %}

<h1 class="titulo-cat">Reportes Generales</h1>


<!-- 游댱 RESUMEN GENERAL -->
<h2 class="subtitulo">Resumen R치pido</h2>

<div class="dashboard-center">
<div class="stats-overview">
    <div class="stat-card">
        <h3>Ventas Hoy</h3>
        <p>{{ ventas_hoy }} Bs</p>
    </div>
    <div class="stat-card">
        <h3>Ventas Mes</h3>
        <p>{{ ventas_mes }} Bs</p>
    </div>
    <div class="stat-card">
        <h3>Ventas A침o</h3>
        <p>{{ ventas_anio }} Bs</p>
    </div>
    <div class="stat-card">
        <h3>Pedidos Completados</h3>
        <p>{{ pedidos_completados }}</p>
    </div>
    <div class="stat-card">
        <h3>Promedio x Pedido</h3>
        <p>{{ promedio_pedido }} Bs</p>
    </div>
</div>
</div>
<!-- 游댱 STOCK ALERTS -->
<h2 class="subtitulo">Stock Alerts</h2>

{% if out_of_stock_products %}
<h3>Out of Stock</h3>
<ul>
    {% for p in out_of_stock_products %}
    <li>{{ p.name }} (0 units)</li>
    {% endfor %}
</ul>
{% endif %}

{% if low_stock_products %}
<h3>Low Stock (&lt; 5 units)</h3>
<ul>
    {% for p in low_stock_products %}
    <li>{{ p.name }} ({{ p.inventory.current_quantity }} units)</li>
    {% endfor %}
</ul>
{% endif %}

{% if not out_of_stock_products and not low_stock_products %}
<p>No stock alerts at the moment.</p>
{% endif %}


<!-- 游댱 VENTAS POR MES -->
<h2 class="subtitulo">Ventas por Mes</h2>

<table class="top-table">
    <tr>
        <th>Mes</th>
        <th>Total</th>
    </tr>
    {% for v in ventas_por_mes %}
    <tr>
        <td>{{ v.mes }}</td>
        <td>{{ v.total }} Bs</td>
    </tr>
    {% endfor %}
</table>

<!-- 游댱 TOP PRODUCTOS -->
<h2 class="subtitulo">Productos M치s Vendidos</h2>

<table class="top-table">
    <tr>
        <th>Producto</th>
        <th>Ventas</th>
    </tr>
    {% for p in productos_top %}
    <tr>
        <td>{{ p.nombre }}</td>
        <td>{{ p.cantidad }}</td>
    </tr>
    {% endfor %}
</table>

<!-- 游댱 TOP CLIENTES -->
<h2 class="subtitulo">Clientes con M치s Compras</h2>

<table class="top-table">
    <tr>
        <th>Cliente</th>
        <th>Compras</th>
    </tr>
    {% for c in clientes_top %}
    <tr>
        <td>{{ c.nombre }}</td>
        <td>{{ c.compras }}</td>
    </tr>
    {% endfor %}
</table>

{% endblock %}
